name: GUL Language Tests

on:
  push:
    branches: [master]
  pull_request:
    branches: [master]

jobs:
  test-gul:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4

      - name: Set up Rust
        uses: dtolnay/rust-toolchain@stable

      - name: Build GUL CLI
        run: cargo build

      - name: Run GUL Builtin Tests
        # We run our newly created builtin_test.mn which we know should pass
        run: ./target/debug/gul test tests/builtin_test.mn

      - name: Run All GUL Tests
        # We run all tests to see the summary.
        # Note: Currently many fail, so we might not want to fail the CI just yet
        # OR we can filter to known good tests.
        # For now, let's run them and allow failure if we just want the report,
        # but usually CI should pass.
        # I'll create a script to run only known good tests for CI.
        run: ./target/debug/gul test
