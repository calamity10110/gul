# GUL UI Component Tests - v3.0
# Tests UI syntax using v3.0 specification

@imp std.testing
@imp std.ui

# ==========================================
# UI Syntax Tests (v3.0)
# ==========================================

@test
fn test_ui_decorator_basic():
    """Basic @ui decorator style"""
    
    # Standalone component decorator
    @ui button{text: "Click Me"}
    @ui input{type: "text", placeholder: "Enter name"}
    @ui label{text: "Hello World"}

@test
fn test_ui_function_basic():
    """Basic ui.component() function syntax"""
    
    # Function call style (equivalent to @ui)
    ui.button(text: "Submit")
    ui.input(type: "password")
    ui.label(text: "Welcome")

@test
fn test_ui_components_equivalent():
    """@ui and ui.component() are interchangeable"""
    
    # With content
    @ui div{class: "container"}
    ui.div(class: "container")

@test
fn test_ui_nested_components():
    """Nested UI components"""
    
    @ui container{
        header: ui.header(text: "My App"),
        main: ui.main{
            sidebar: ui.sidebar(width: 200),
            content: ui.content(flex: 1)
        },
        footer: ui.footer(text: "Â© 2025")
    }

@test
fn test_ui_mixed_brackets():
    """UI with mixed bracket styles (all valid)"""
    
    ui.layout(direction: "vertical")[
        ui.panel{title: "Dashboard"},
        ui.grid(cols: 3){
            ui.card[title: "Card 1"],
            ui.card(title: "Card 2"),
            ui.card{title: "Card 3"}
        }
    ]

@test
fn test_ui_with_data_binding():
    """UI components with data"""
    
    data = [
        {name: "Alice", age: 30},
        {name: "Bob", age: 25}
    ]
    
    @ui table{
        data: data,
        columns: ["Name", "Age"]
    }
    
    ui.table(data: data, columns: ["Name", "Age"])

@test
fn test_ui_event_handlers():
    """UI with event handlers"""
    
    fn handle_click():
        print("Clicked!")
    
    @ui button{
        text: "Click Me",
        onclick: handle_click
    }

@test
fn test_ui_conditional_rendering():
    """Conditional UI rendering"""
    
    show_sidebar = True
    
    ui.layout{
        if show_sidebar:
            ui.sidebar(width: 200)
        ui.main(flex: 1)
    }

@test
fn test_ui_list_rendering():
    """List-based UI rendering"""
    
    items = ["Item 1", "Item 2", "Item 3"]
    
    @ui list{
        [ui.li(text: item) for item in items]
    }

@test
fn test_tui_vs_webui_compatibility():
    """Same syntax works for TUI and Web UI"""
    
    # This syntax works for both TUI and Web targets
    @ui container{
        text: ui.text(content: "Works everywhere!"),
        button: ui.button(text: "Click"),
        input: ui.input(placeholder: "Type here")
    }

# ==========================================
# Run Tests
# ==========================================

mn:
    print("Running UI Component Tests (v3.0 syntax)...")
    testing.run_all_tests()
    print("All UI tests passed!")
