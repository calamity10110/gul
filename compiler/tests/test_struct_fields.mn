# Minimal test of struct field storage
@imp compiler.lexer.lexer

fn test_parser_fields():
    let source = "let x = 5"
    let tokens = tokenize(source)
    print("DEBUG: tokens count before create:")
    print(len(tokens))
    
    struct TestParser:
        data: @list[Token]
        pos: @int
        
        fn create(toks: @list[Token]) -> TestParser:
            return TestParser{data: toks, pos: @int(0)}
        
        fn show(self):
            print("Inside show method")
            print(self.pos)
            print(len(self.data))
    
    var p = TestParser.create(tokens)
    print("Parser created")
    p.show()

test_parser_fields()

mn:
    print("Done")
